# (width, height) max values for user input image. Images too large will be shrinked
RESIZE_VALUES = (2048,1024)

# lego object detection
ROBOFLOW_PROJECT_ID_LOD="lego_object_detection-5lfzr"
ROBOFLOW_PROJECT_VERSION_LOD="1"
# lego brick detector
ROBOFLOW_PROJECT_ID_LBD="lego-brick-detector-xvqkq"
ROBOFLOW_PROJECT_VERSION_LBD="2"

# Segment-anything model (SAM) hyperparameters; default and 2 relevant configs (CONFIG_1 gives best results)
SAM_DEFAULT_PARAMS = {
    "points_per_side"                : 32,
    "points_per_batch"               : 64,
    "pred_iou_thresh"                : 0.88,
    "stability_score_thresh"         : 0.95,
    "stability_score_offset"         : 1.0,
    "box_nms_thresh"                 : 0.7,
    "crop_n_layers"                  : 0,
    "crop_nms_thresh"                : 0.7,
    "crop_overlap_ratio"             : 0.34133,
    "crop_n_points_downscale_factor" : 1,
    "point_grids"                    : None,
    "min_mask_region_area"           : 0
}

SAM_CONFIG_1 = {
    "points_per_side"                : 48,
    "points_per_batch"               : SAM_DEFAULT_PARAMS["points_per_batch"],
    "pred_iou_thresh"                : 0.88,
    "stability_score_thresh"         : SAM_DEFAULT_PARAMS["stability_score_thresh"],
    "stability_score_offset"         : SAM_DEFAULT_PARAMS["stability_score_offset"],
    "box_nms_thresh"                 : 0.7,
    "crop_n_layers"                  : 0,
    "crop_nms_thresh"                : SAM_DEFAULT_PARAMS["crop_nms_thresh"],
    "crop_overlap_ratio"             : SAM_DEFAULT_PARAMS["crop_overlap_ratio"],
    "crop_n_points_downscale_factor" : SAM_DEFAULT_PARAMS["crop_n_points_downscale_factor"],
    "point_grids"                    : SAM_DEFAULT_PARAMS["point_grids"],
    "min_mask_region_area"           : 20
}

SAM_CONFIG_2 = {
    "points_per_side"                : 32,
    "points_per_batch"               : SAM_DEFAULT_PARAMS["points_per_batch"],
    "pred_iou_thresh"                : 0.94,
    "stability_score_thresh"         : SAM_DEFAULT_PARAMS["stability_score_thresh"],
    "stability_score_offset"         : SAM_DEFAULT_PARAMS["stability_score_offset"],
    "box_nms_thresh"                 : 0.5,
    "crop_n_layers"                  : 1,
    "crop_nms_thresh"                : SAM_DEFAULT_PARAMS["crop_nms_thresh"],
    "crop_overlap_ratio"             : SAM_DEFAULT_PARAMS["crop_overlap_ratio"],
    "crop_n_points_downscale_factor" : SAM_DEFAULT_PARAMS["crop_n_points_downscale_factor"],
    "point_grids"                    : SAM_DEFAULT_PARAMS["point_grids"],
    "min_mask_region_area"           : 20
}

# tmp: hard-coded outputs from SAM for original image 08_parts.jpg
IMG_08_SIZE = (1440, 1920)  # (width, height)
SAM_TEST_MASKS_08 = [
  {'area': 27034,
   'bbox': [811, 449, 249, 230],
   'predicted_iou': 1.005009651184082,
   'point_coords': [[885.0, 660.0000000000001]],
   'stability_score': 0.9894396066665649,
   'crop_box': [0, 0, 1440, 1920]},
  {'area': 20111,
   'bbox': [684, 1144, 251, 165],
   'predicted_iou': 0.9897558093070984,
   'point_coords': [[735.0, 1220.0000000000002]],
   'stability_score': 0.9856867790222168,
   'crop_box': [0, 0, 1440, 1920]},
  {'area': 22789,
   'bbox': [989, 845, 194, 121],
   'predicted_iou': 0.9688608050346375,
   'point_coords': [[1095.0, 860.0000000000001]],
   'stability_score': 0.9738599061965942,
   'crop_box': [0, 0, 1440, 1920]},
  {'area': 19763,
   'bbox': [668, 720, 203, 228],
   'predicted_iou': 0.9668008089065552,
   'point_coords': [[765.0, 780.0000000000001]],
   'stability_score': 0.9795048832893372,
   'crop_box': [0, 0, 1440, 1920]},
  {'area': 6618,
   'bbox': [410, 1324, 110, 123],
   'predicted_iou': 0.9632216095924377,
   'point_coords': [[465.0000000000001, 1420.0]],
   'stability_score': 0.9772896766662598,
   'crop_box': [0, 0, 1440, 1920]},
  {'area': 8173,
   'bbox': [806, 909, 127, 110],
   'predicted_iou': 0.9613260626792908,
   'point_coords': [[885.0, 940.0000000000002]],
   'stability_score': 0.9827690720558167,
   'crop_box': [0, 0, 1440, 1920]},
  {'area': 5663,
   'bbox': [834, 652, 172, 181],
   'predicted_iou': 0.9474691152572632,
   'point_coords': [[855.0, 820.0000000000002]],
   'stability_score': 0.9649791717529297,
   'crop_box': [0, 0, 1440, 1920]},
  {'area': 1171,
   'bbox': [884, 972, 39, 36],
   'predicted_iou': 0.9297435283660889,
   'point_coords': [[915.0000000000001, 979.9999999999999]],
   'stability_score': 0.9788851141929626,
   'crop_box': [0, 0, 1440, 1920]},
  {'area': 1273,
   'bbox': [881, 1165, 40, 38],
   'predicted_iou': 0.9192090034484863,
   'point_coords': [[885.0, 1180.0]],
   'stability_score': 0.9644787907600403,
   'crop_box': [0, 0, 1440, 1920]},
  {'area': 1127,
   'bbox': [832, 1197, 37, 35],
   'predicted_iou': 0.9178050756454468,
   'point_coords': [[855.0, 1220.0000000000002]],
   'stability_score': 0.9772129654884338,
   'crop_box': [0, 0, 1440, 1920]},
  {'area': 1682,
   'bbox': [730, 1257, 43, 51],
   'predicted_iou': 0.9165098667144775,
   'point_coords': [[765.0, 1260.0]],
   'stability_score': 0.9706745147705078,
   'crop_box': [0, 0, 1440, 1920]},
  {'area': 12285,
   'bbox': [182, 695, 189, 241],
   'predicted_iou': 0.9162327647209167,
   'point_coords': [[255.0, 740.0000000000001]],
   'stability_score': 0.9558015465736389,
   'crop_box': [0, 0, 1440, 1920]},
  {'area': 1175,
   'bbox': [819, 916, 38, 38],
   'predicted_iou': 0.9154282808303833,
   'point_coords': [[855.0, 940.0000000000002]],
   'stability_score': 0.9698492288589478,
   'crop_box': [0, 0, 1440, 1920]},
  {'area': 1337,
   'bbox': [781, 1226, 41, 38],
   'predicted_iou': 0.9128845930099487,
   'point_coords': [[795.0, 1260.0]],
   'stability_score': 0.9719350337982178,
   'crop_box': [0, 0, 1440, 1920]},
  {'area': 342,
   'bbox': [720, 850, 21, 19],
   'predicted_iou': 0.9042161703109741,
   'point_coords': [[735.0, 860.0000000000001]],
   'stability_score': 0.9825072884559631,
   'crop_box': [0, 0, 1440, 1920]},
  {'area': 1383,
   'bbox': [748, 829, 42, 39],
   'predicted_iou': 0.9029299020767212,
   'point_coords': [[765.0, 860.0000000000001]],
   'stability_score': 0.9763948321342468,
   'crop_box': [0, 0, 1440, 1920]},
  {'area': 1114,
   'bbox': [720, 879, 38, 36],
   'predicted_iou': 0.9024326801300049,
   'point_coords': [[735.0, 900.0000000000001]],
   'stability_score': 0.9561787843704224,
   'crop_box': [0, 0, 1440, 1920]},
  {'area': 4834,
   'bbox': [371, 1312, 103, 108],
   'predicted_iou': 0.8972175121307373,
   'point_coords': [[435.00000000000006, 1340.0000000000002]],
   'stability_score': 0.96278977394104,
   'crop_box': [0, 0, 1440, 1920]},
  {'area': 1382,
   'bbox': [776, 778, 42, 40],
   'predicted_iou': 0.8888406753540039,
   'point_coords': [[795.0, 780.0000000000001]],
   'stability_score': 0.9623579382896423,
   'crop_box': [0, 0, 1440, 1920]},
  {'area': 2599986,
   'bbox': [5, 0, 1431, 1919],
   'predicted_iou': 1.033994197845459,
   'point_coords': [[585.0000000000001, 1260.0]],
   'stability_score': 0.9862890839576721,
   'crop_box': [0, 0, 1440, 1920]}
]
